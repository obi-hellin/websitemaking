{% extends 'page/base.html' %}

{% block head_title %}
  {{ post.title }} 
{% endblock %}


{% block main_area %}
  <!-- title -->
  <section class="about-banner mb-20">
    <div class="container" id="main-area">
      <div class="row d-flex align-items-center justify-content-center">
        <div class="about-content col-lg-12">
          <h2 class="text-white mb-20">
            {{ post.title }}
          </h2>
          <span class="text-white mb-5">By {{ post.author | upper }} &nbsp; <span class="lnr lnr-pencil"></span>{{ post.created_at }}</span> 
          <p class="text-white link-nav">
              <a href="/">Home</a>  <span class="lnr lnr-arrow-right"></span>  <a href="/portfolio">Portfolio</a> <span class="lnr lnr-arrow-right"></span>
              <a href="/portfolio/category/{{ post.category | lower }}">{{ post.category }}</a>  <span class="lnr lnr-arrow-right"></span>  <a href="/portfolio/{{ post.pk }}">{{ post.title | truncatewords:2 }}</a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- content -->
  <section class="portfolio-content" id="post-area">
      <div class="container">
          <!-- <img src="../storage/122.jpg" alt="red" height="300px"> -->
          <p>
            {{ post.get_content_markdown | safe}}
          </p>
          <p>
            {% if post.tags.exists %}
              <span class="lnr lnr-tag"></span>
              {% for tag in post.tags.iterator %}
                <a href="{{ tag.get_absolute_url }}"><span class="badge badge-pill badge-light">{{ tag }}</span></a>
              {% endfor %}
              <br>
              <br>
            {% endif %}
          </p>
      </div>

  </section>
  <div class="container" align="right">
    {% if user.is_authenticated and user == post.author %}
      <a href="/portfolio/update_post/{{ post.pk }}/" class="genric-btn primary-border circle" target="_blank">&nbsp;&nbsp; Edit current Post &nbsp;&nbsp;</a>
    {% endif %}
  </div>

  <hr>



  <!-- comment -->
  <section id="comment-area">
    <div class="card-body">
      <!-- Comment form-->
      <form class="mb-4"><textarea class="form-control" rows="3" placeholder="Join the discussion and leave a comment!"></textarea></form>
      
      
      <!-- Comment with nested comments-->

      {% if post.comment_set.exists %}
        {% for comment in post.comment_set.iterator %}
      <!-- Single comment-->
          <div class="d-flex" id="commet-{{ comment.pk }}">
            <div class="flex-shrink-0 mr-3"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..."></div>
              <div class="ms-3">
                <div class="fw-bold">
                  {{ comment.author.username }} &nbsp;&nbsp; <span class="lnr lnr-pencil"></span>{{ comment.created_at }}
                </div>
                <div>                
                  {{ comment.content | linebreaks }}
                </div>
              </div>
          </div>
            <hr>
        {% endfor %}
      {% endif %}
    </div>
  </section>

{% endblock %}


